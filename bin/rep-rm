#!/usr/bin/env rc

# Usage: rep-rm <name>
if (! ~ $#* 1) {
	printf 'usage: rep-rm <name>\n'
	exit
}

lib = $1
pattern = '/' ^ $lib ^ '/,1d'

if (grep -q $lib .gems) {
	sed $pattern .gems > .gems-tmp && cat .gems-tmp > .gems && rm .gems-tmp
	printf 'removed: %s\n' $lib
} else {
	printf 'failed: %s not found\n' $lib
	exit 1
}
